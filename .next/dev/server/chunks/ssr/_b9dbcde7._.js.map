{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/actions/auth.ts"],"sourcesContent":["'use server';\r\n\r\nimport { signIn, signOut } from \"@/auth\";\r\nimport { supabaseAdmin } from \"@/lib/supabase\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport async function signupAction(formData: FormData) {\r\n    const email = formData.get(\"email\") as string;\r\n    const password = formData.get(\"password\") as string;\r\n    const name = formData.get(\"name\") as string;\r\n\r\n    if (!email || !password) return { error: \"Missing fields\" };\r\n\r\n    try {\r\n        // 1. Check if user already exists\r\n        const { data: existingUser } = await supabaseAdmin\r\n            .from('users')\r\n            .select('id')\r\n            .eq('email', email)\r\n            .single();\r\n\r\n        if (existingUser) return { error: \"User already exists\" };\r\n\r\n        // 2. Hash password\r\n        const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n        // 3. Create user\r\n        const { data: newUser, error: createError } = await supabaseAdmin\r\n            .from('users')\r\n            .insert({\r\n                email,\r\n                password: hashedPassword,\r\n                name: name || email.split(\"@\")[0],\r\n                image: `https://i.pravatar.cc/150?u=${email}`,\r\n                role: 'USER'\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n        if (createError) throw createError;\r\n\r\n        // 4. Sign in with the new account\r\n        // We set redirect: false to handle the redirect manually and ensure a clean state\r\n        await signIn(\"credentials\", {\r\n            email,\r\n            password,\r\n            redirect: false\r\n        });\r\n\r\n        return { success: true };\r\n    } catch (error) {\r\n        return { error: \"Failed to create account\" };\r\n    }\r\n}\r\n\r\nexport async function loginAction(formData: FormData) {\r\n    const email = formData.get(\"email\") as string;\r\n    const password = formData.get(\"password\") as string;\r\n\r\n    if (!email || !password) return { error: \"Missing fields\" };\r\n\r\n    try {\r\n        const result = await signIn(\"credentials\", {\r\n            email,\r\n            password,\r\n            redirect: false,\r\n        });\r\n\r\n        if (result?.error) return { error: \"Invalid credentials\" };\r\n\r\n        return { success: true };\r\n    } catch (error) {\r\n        return { error: \"Authentication failed\" };\r\n    }\r\n}\r\n\r\nexport async function socialLoginAction(provider: string) {\r\n    await signIn(provider, { redirectTo: \"/account\" });\r\n}\r\n\r\nexport async function logoutAction() {\r\n    await signOut({ redirectTo: \"/\" });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AACA;;;;;;AAEO,eAAe,aAAa,QAAkB;IACjD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAC9B,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;QAAE,OAAO;IAAiB;IAE1D,IAAI;QACA,kCAAkC;QAClC,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,uIAAa,CAC7C,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,SAAS,OACZ,MAAM;QAEX,IAAI,cAAc,OAAO;YAAE,OAAO;QAAsB;QAExD,mBAAmB;QACnB,MAAM,iBAAiB,MAAM,4IAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,iBAAiB;QACjB,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,uIAAa,CAC5D,IAAI,CAAC,SACL,MAAM,CAAC;YACJ;YACA,UAAU;YACV,MAAM,QAAQ,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;YACjC,OAAO,CAAC,4BAA4B,EAAE,OAAO;YAC7C,MAAM;QACV,GACC,MAAM,GACN,MAAM;QAEX,IAAI,aAAa,MAAM;QAEvB,kCAAkC;QAClC,kFAAkF;QAClF,MAAM,IAAA,qHAAM,EAAC,eAAe;YACxB;YACA;YACA,UAAU;QACd;QAEA,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,OAAO;QAA2B;IAC/C;AACJ;AAEO,eAAe,YAAY,QAAkB;IAChD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;QAAE,OAAO;IAAiB;IAE1D,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,qHAAM,EAAC,eAAe;YACvC;YACA;YACA,UAAU;QACd;QAEA,IAAI,QAAQ,OAAO,OAAO;YAAE,OAAO;QAAsB;QAEzD,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,OAAO;QAAwB;IAC5C;AACJ;AAEO,eAAe,kBAAkB,QAAgB;IACpD,MAAM,IAAA,qHAAM,EAAC,UAAU;QAAE,YAAY;IAAW;AACpD;AAEO,eAAe;IAClB,MAAM,IAAA,sHAAO,EAAC;QAAE,YAAY;IAAI;AACpC;;;IA5EsB;IAiDA;IAqBA;IAIA;;AA1EA,+OAAA;AAiDA,+OAAA;AAqBA,+OAAA;AAIA,+OAAA","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/actions/admin-products.ts"],"sourcesContent":["'use server';\r\n\r\nimport { supabaseAdmin } from \"@/lib/supabase\";\r\nimport { requireAdmin } from \"@/lib/auth-utils\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { z } from \"zod\";\r\n\r\nconst productSchema = z.object({\r\n    name: z.string().min(1, \"Name is required\"),\r\n    description: z.string().optional(),\r\n    price: z.coerce.number().min(0, \"Price must be positive\"),\r\n    oldPrice: z.coerce.number().optional().nullable(),\r\n    stock: z.coerce.number().int().min(0),\r\n    category: z.string().min(1, \"Category is required\"),\r\n    image: z.string().url(\"Valid image URL required\"),\r\n    features: z.string().optional(),\r\n    colors: z.string().optional(),\r\n    type: z.enum(['SIMPLE', 'VARIABLE']).default('SIMPLE'),\r\n    variations: z.string().optional() // JSON string\r\n});\r\n\r\nexport async function createProduct(formData: FormData) {\r\n    await requireAdmin();\r\n\r\n    const raw = {\r\n        name: formData.get('name'),\r\n        description: formData.get('description'),\r\n        price: formData.get('price'),\r\n        oldPrice: formData.get('oldPrice'),\r\n        stock: formData.get('stock'),\r\n        category: formData.get('category'),\r\n        image: formData.get('image'),\r\n        features: formData.get('features'),\r\n        colors: formData.get('colors'),\r\n        type: formData.get('type') || 'SIMPLE',\r\n        variations: formData.get('variations')\r\n    };\r\n\r\n    const validated = productSchema.safeParse(raw);\r\n\r\n    if (!validated.success) {\r\n        return { error: validated.error.flatten().fieldErrors };\r\n    }\r\n\r\n    const { data } = validated;\r\n    const featuresArray = data.features ? data.features.split(',').map(s => s.trim()).filter(Boolean) : [];\r\n    const colorsArray = data.colors ? data.colors.split(',').map(s => s.trim()).filter(Boolean) : [];\r\n\r\n    let categoryId = null;\r\n    const { data: cat } = await supabaseAdmin.from('categories').select('id').eq('name', data.category).single();\r\n    if (cat) {\r\n        categoryId = cat.id;\r\n    } else {\r\n        const { data: newCat } = await supabaseAdmin.from('categories').insert({\r\n            name: data.category,\r\n            slug: data.category.toLowerCase().replace(/ /g, '-')\r\n        }).select().single();\r\n        if (newCat) categoryId = newCat.id;\r\n    }\r\n\r\n    // 1. Insert Product\r\n    const { data: product, error: prodError } = await supabaseAdmin.from('products').insert({\r\n        name: data.name,\r\n        description: data.description,\r\n        price: data.price,\r\n        old_price: data.oldPrice || null,\r\n        stock: data.type === 'VARIABLE' ? 0 : data.stock,\r\n        image: data.image,\r\n        category_name: data.category,\r\n        category_id: categoryId,\r\n        features: featuresArray,\r\n        colors: colorsArray,\r\n        type: data.type,\r\n        rating: 0,\r\n        reviews_count: 0\r\n    }).select().single();\r\n\r\n    if (prodError) {\r\n        console.error(\"Create Product Error\", prodError);\r\n        return { error: \"Failed to create product\" };\r\n    }\r\n\r\n    // 2. Insert Variations if any\r\n    if (data.type === 'VARIABLE' && data.variations) {\r\n        try {\r\n            const variations = JSON.parse(data.variations);\r\n            if (variations.length > 0) {\r\n                const variationsToInsert = variations.map((v: any) => ({\r\n                    product_id: product.id,\r\n                    sku: v.sku,\r\n                    price: v.price,\r\n                    stock: v.stock,\r\n                    attributes: v.attributes,\r\n                    image: v.image || data.image\r\n                }));\r\n\r\n                const { error: varError } = await supabaseAdmin.from('product_variations').insert(variationsToInsert);\r\n                if (varError) throw varError;\r\n\r\n                // Sync total stock\r\n                const totalStock = variations.reduce((acc: number, v: any) => acc + (v.stock || 0), 0);\r\n                await supabaseAdmin.from('products').update({ stock: totalStock }).eq('id', product.id);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Variations Parsing/Insert Error\", e);\r\n        }\r\n    }\r\n\r\n    revalidatePath('/admin/products');\r\n    revalidatePath('/shop');\r\n    return { success: true };\r\n}\r\n\r\nexport async function updateProduct(id: string, formData: FormData) {\r\n    await requireAdmin();\r\n\r\n    const raw = {\r\n        name: formData.get('name'),\r\n        description: formData.get('description'),\r\n        price: formData.get('price'),\r\n        oldPrice: formData.get('oldPrice'),\r\n        stock: formData.get('stock'),\r\n        category: formData.get('category'),\r\n        image: formData.get('image'),\r\n        features: formData.get('features'),\r\n        colors: formData.get('colors'),\r\n        type: formData.get('type') || 'SIMPLE',\r\n        variations: formData.get('variations')\r\n    };\r\n\r\n    const validated = productSchema.safeParse(raw);\r\n    if (!validated.success) return { error: validated.error.flatten().fieldErrors };\r\n\r\n    const { data } = validated;\r\n    const featuresArray = data.features ? data.features.split(',').map(s => s.trim()).filter(Boolean) : [];\r\n    const colorsArray = data.colors ? data.colors.split(',').map(s => s.trim()).filter(Boolean) : [];\r\n\r\n    // Update product\r\n    const { error: prodError } = await supabaseAdmin.from('products').update({\r\n        name: data.name,\r\n        description: data.description,\r\n        price: data.price,\r\n        old_price: data.oldPrice || null,\r\n        stock: data.type === 'VARIABLE' ? 0 : data.stock,\r\n        image: data.image,\r\n        category_name: data.category,\r\n        features: featuresArray,\r\n        colors: colorsArray,\r\n        type: data.type,\r\n    }).eq('id', id);\r\n\r\n    if (prodError) return { error: \"Update failed\" };\r\n\r\n    // Update Variations\r\n    if (data.type === 'VARIABLE' && data.variations) {\r\n        try {\r\n            const variations = JSON.parse(data.variations);\r\n            // Simple approach: delete existing and re-insert for MVP\r\n            await supabaseAdmin.from('product_variations').delete().eq('product_id', id);\r\n\r\n            if (variations.length > 0) {\r\n                const variationsToInsert = variations.map((v: any) => ({\r\n                    product_id: id,\r\n                    sku: v.sku,\r\n                    price: v.price,\r\n                    stock: v.stock,\r\n                    attributes: v.attributes,\r\n                    image: v.image || data.image\r\n                }));\r\n                const { error: varError } = await supabaseAdmin.from('product_variations').insert(variationsToInsert);\r\n                if (varError) throw varError;\r\n\r\n                const totalStock = variations.reduce((acc: number, v: any) => acc + (v.stock || 0), 0);\r\n                await supabaseAdmin.from('products').update({ stock: totalStock }).eq('id', id);\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Variations Update Error\", e);\r\n        }\r\n    }\r\n\r\n    revalidatePath('/admin/products');\r\n    revalidatePath(`/product/${id}`);\r\n    return { success: true };\r\n}\r\n\r\nexport async function deleteProduct(id: string) {\r\n    await requireAdmin();\r\n    const { error } = await supabaseAdmin.from('products').delete().eq('id', id);\r\n    if (error) return { error: \"Failed to delete\" };\r\n    revalidatePath('/admin/products');\r\n    return { success: true };\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/app/admin/products/page.tsx"],"sourcesContent":["import React from 'react';\r\nimport { supabaseAdmin } from \"@/lib/supabase\";\r\nimport Link from 'next/link';\r\nimport { deleteProduct } from '@/actions/admin-products';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nexport default async function AdminProductsPage() {\r\n    const { data: products } = await supabaseAdmin.from('products').select('*').order('created_at', { ascending: false });\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-black text-gray-900 tracking-tight\">Products</h2>\r\n                <Link\r\n                    href=\"/admin/products/new\"\r\n                    className=\"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-emerald-600/20 hover:bg-emerald-700 transition-all flex items-center gap-2\"\r\n                >\r\n                    <span>+</span> New Product\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-[2rem] border border-gray-100 shadow-sm overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead className=\"bg-gray-50 border-b border-gray-100\">\r\n                            <tr>\r\n                                <th className=\"p-6 font-black uppercase text-xs text-gray-400 tracking-widest\">Product</th>\r\n                                <th className=\"p-6 font-black uppercase text-xs text-gray-400 tracking-widest\">Category</th>\r\n                                <th className=\"p-6 font-black uppercase text-xs text-gray-400 tracking-widest\">Stock</th>\r\n                                <th className=\"p-6 font-black uppercase text-xs text-gray-400 tracking-widest\">Price</th>\r\n                                <th className=\"p-6 font-black uppercase text-xs text-gray-400 tracking-widest\">Type</th>\r\n                                <th className=\"p-6 font-black uppercase text-xs text-gray-400 tracking-widest text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-50\">\r\n                            {products && products.length > 0 ? (\r\n                                products.map((product) => (\r\n                                    <tr key={product.id} className=\"hover:bg-gray-50/50 transition-colors\">\r\n                                        <td className=\"p-6\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"w-12 h-12 bg-gray-100 rounded-xl overflow-hidden\">\r\n                                                    <img src={product.image} className=\"w-full h-full object-cover\" alt={product.name} />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"font-bold text-gray-900 line-clamp-1\">{product.name}</p>\r\n                                                    <p className=\"text-xs text-gray-400 font-medium\">ID: {product.id.toString().slice(0, 4)}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"p-6\">\r\n                                            <span className=\"px-3 py-1 bg-gray-100 rounded-lg text-xs font-bold text-gray-600\">{product.category_name}</span>\r\n                                        </td>\r\n                                        <td className=\"p-6\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className={`w-2 h-2 rounded-full ${product.stock > 0 ? 'bg-emerald-500' : 'bg-red-500'}`} />\r\n                                                <span className={`font-bold text-sm ${product.stock < 5 ? 'text-red-500' : 'text-gray-900'}`}>\r\n                                                    {product.stock} in stock\r\n                                                </span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"p-6\">\r\n                                            <p className=\"font-black text-gray-900\">${product.price}</p>\r\n                                        </td>\r\n                                        <td className=\"p-6\">\r\n                                            <span className={`px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest ${product.type === 'VARIABLE' ? 'bg-purple-100 text-purple-600' : 'bg-blue-100 text-blue-600'}`}>\r\n                                                {product.type || 'SIMPLE'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"p-6 text-right\">\r\n                                            <div className=\"flex items-center justify-end gap-3\">\r\n                                                <Link href={`/admin/products/${product.id}`} className=\"p-2 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all\">\r\n                                                    ‚úèÔ∏è\r\n                                                </Link>\r\n                                                <DeleteButton id={product.id} />\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                <tr>\r\n                                    <td colSpan={5} className=\"p-12 text-center text-gray-400 font-medium\">\r\n                                        No products found. Add one to get started.\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction DeleteButton({ id }: { id: string }) {\r\n    return (\r\n        <form action={async () => {\r\n            'use server';\r\n            await deleteProduct(id);\r\n        }}>\r\n            <button type=\"submit\" className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all\">\r\n                üóëÔ∏è\r\n            </button>\r\n        </form>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 715, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/.next-internal/server/app/admin/products/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logoutAction as '00f7e50ecd6072ef6bb910f7e68b18d28bf57bad40'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_0 as '40eeb635d2a42c06a280ec2ff4658e374849258c4b'} from 'ACTIONS_MODULE1'\nexport {createProduct as '405d016904ffcd458683c44a6b335438022d3e570b'} from 'ACTIONS_MODULE2'\nexport {deleteProduct as '405d3d6769fe199bf5feb4a017e7a03cf269f633a6'} from 'ACTIONS_MODULE2'\nexport {updateProduct as '60e1bd98efdf72fa53332883bd25651c836f90a60c'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AACA;AACA","debugId":null}}]
}