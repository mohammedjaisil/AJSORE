{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/actions/auth.ts"],"sourcesContent":["'use server';\r\n\r\nimport { signIn, signOut } from \"@/auth\";\r\nimport { supabaseAdmin } from \"@/lib/supabase\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport async function signupAction(formData: FormData) {\r\n    const email = formData.get(\"email\") as string;\r\n    const password = formData.get(\"password\") as string;\r\n    const name = formData.get(\"name\") as string;\r\n\r\n    if (!email || !password) return { error: \"Missing fields\" };\r\n\r\n    try {\r\n        // 1. Check if user already exists\r\n        const { data: existingUser } = await supabaseAdmin\r\n            .from('users')\r\n            .select('id')\r\n            .eq('email', email)\r\n            .single();\r\n\r\n        if (existingUser) return { error: \"User already exists\" };\r\n\r\n        // 2. Hash password\r\n        const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n        // 3. Create user\r\n        const { data: newUser, error: createError } = await supabaseAdmin\r\n            .from('users')\r\n            .insert({\r\n                email,\r\n                password: hashedPassword,\r\n                name: name || email.split(\"@\")[0],\r\n                image: `https://i.pravatar.cc/150?u=${email}`,\r\n                role: 'USER'\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n        if (createError) throw createError;\r\n\r\n        // 4. Sign in with the new account\r\n        // We set redirect: false to handle the redirect manually and ensure a clean state\r\n        await signIn(\"credentials\", {\r\n            email,\r\n            password,\r\n            redirect: false\r\n        });\r\n\r\n        return { success: true };\r\n    } catch (error) {\r\n        return { error: \"Failed to create account\" };\r\n    }\r\n}\r\n\r\nexport async function loginAction(formData: FormData) {\r\n    const email = formData.get(\"email\") as string;\r\n    const password = formData.get(\"password\") as string;\r\n\r\n    if (!email || !password) return { error: \"Missing fields\" };\r\n\r\n    try {\r\n        const result = await signIn(\"credentials\", {\r\n            email,\r\n            password,\r\n            redirect: false,\r\n        });\r\n\r\n        if (result?.error) return { error: \"Invalid credentials\" };\r\n\r\n        return { success: true };\r\n    } catch (error) {\r\n        return { error: \"Authentication failed\" };\r\n    }\r\n}\r\n\r\nexport async function socialLoginAction(provider: string) {\r\n    await signIn(provider, { redirectTo: \"/account\" });\r\n}\r\n\r\nexport async function logoutAction() {\r\n    await signOut({ redirectTo: \"/\" });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AACA;;;;;;AAEO,eAAe,aAAa,QAAkB;IACjD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAC9B,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;QAAE,OAAO;IAAiB;IAE1D,IAAI;QACA,kCAAkC;QAClC,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,uIAAa,CAC7C,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,SAAS,OACZ,MAAM;QAEX,IAAI,cAAc,OAAO;YAAE,OAAO;QAAsB;QAExD,mBAAmB;QACnB,MAAM,iBAAiB,MAAM,4IAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,iBAAiB;QACjB,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,uIAAa,CAC5D,IAAI,CAAC,SACL,MAAM,CAAC;YACJ;YACA,UAAU;YACV,MAAM,QAAQ,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;YACjC,OAAO,CAAC,4BAA4B,EAAE,OAAO;YAC7C,MAAM;QACV,GACC,MAAM,GACN,MAAM;QAEX,IAAI,aAAa,MAAM;QAEvB,kCAAkC;QAClC,kFAAkF;QAClF,MAAM,IAAA,qHAAM,EAAC,eAAe;YACxB;YACA;YACA,UAAU;QACd;QAEA,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,OAAO;QAA2B;IAC/C;AACJ;AAEO,eAAe,YAAY,QAAkB;IAChD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;QAAE,OAAO;IAAiB;IAE1D,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,qHAAM,EAAC,eAAe;YACvC;YACA;YACA,UAAU;QACd;QAEA,IAAI,QAAQ,OAAO,OAAO;YAAE,OAAO;QAAsB;QAEzD,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,OAAO;QAAwB;IAC5C;AACJ;AAEO,eAAe,kBAAkB,QAAgB;IACpD,MAAM,IAAA,qHAAM,EAAC,UAAU;QAAE,YAAY;IAAW;AACpD;AAEO,eAAe;IAClB,MAAM,IAAA,sHAAO,EAAC;QAAE,YAAY;IAAI;AACpC;;;IA5EsB;IAiDA;IAqBA;IAIA;;AA1EA,+OAAA;AAiDA,+OAAA;AAqBA,+OAAA;AAIA,+OAAA","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/actions/admin.ts"],"sourcesContent":["'use server';\r\n\r\nimport { supabaseAdmin } from \"@/lib/supabase\";\r\nimport { requireAdmin } from \"@/lib/auth-utils\";\r\n\r\nexport async function getAdminStats() {\r\n    await requireAdmin();\r\n\r\n    try {\r\n        const { count: usersCount, error: usersError } = await supabaseAdmin.from('users').select('*', { count: 'exact', head: true });\r\n        const { count: productsCount, error: prodsError } = await supabaseAdmin.from('products').select('*', { count: 'exact', head: true });\r\n        const { count: ordersCount, error: ordersError } = await supabaseAdmin.from('orders').select('*', { count: 'exact', head: true });\r\n\r\n        // Fetch low stock items\r\n        const { data: lowStockProducts } = await supabaseAdmin.from('products').select('*').lt('stock', 5).limit(5);\r\n\r\n        // Calculate revenue\r\n        const { data: revenueData } = await supabaseAdmin.from('orders').select('total');\r\n        const totalRevenue = revenueData?.reduce((acc, order) => acc + (Number(order.total) || 0), 0) || 0;\r\n\r\n        // Recent orders\r\n        const { data: recentOrders } = await supabaseAdmin\r\n            .from('orders')\r\n            .select('id, user_email, total, status, created_at')\r\n            .order('created_at', { ascending: false })\r\n            .limit(5);\r\n\r\n        return {\r\n            usersCount: usersCount || 0,\r\n            productsCount: productsCount || 0,\r\n            ordersCount: ordersCount || 0,\r\n            totalRevenue,\r\n            lowStockProducts: lowStockProducts || [],\r\n            recentOrders: recentOrders || []\r\n        };\r\n    } catch (error) {\r\n        console.error(\"Admin Stats Error:\", error);\r\n        return {\r\n            usersCount: 0, productsCount: 0, ordersCount: 0, totalRevenue: 0, lowStockProducts: [], recentOrders: []\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAEO,eAAe;IAClB,MAAM,IAAA,2IAAY;IAElB,IAAI;QACA,MAAM,EAAE,OAAO,UAAU,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,uIAAa,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC,KAAK;YAAE,OAAO;YAAS,MAAM;QAAK;QAC5H,MAAM,EAAE,OAAO,aAAa,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,uIAAa,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK;YAAE,OAAO;YAAS,MAAM;QAAK;QAClI,MAAM,EAAE,OAAO,WAAW,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,uIAAa,CAAC,IAAI,CAAC,UAAU,MAAM,CAAC,KAAK;YAAE,OAAO;YAAS,MAAM;QAAK;QAE/H,wBAAwB;QACxB,MAAM,EAAE,MAAM,gBAAgB,EAAE,GAAG,MAAM,uIAAa,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,SAAS,GAAG,KAAK,CAAC;QAEzG,oBAAoB;QACpB,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,uIAAa,CAAC,IAAI,CAAC,UAAU,MAAM,CAAC;QACxE,MAAM,eAAe,aAAa,OAAO,CAAC,KAAK,QAAU,MAAM,CAAC,OAAO,MAAM,KAAK,KAAK,CAAC,GAAG,MAAM;QAEjG,gBAAgB;QAChB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,uIAAa,CAC7C,IAAI,CAAC,UACL,MAAM,CAAC,6CACP,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM,GACvC,KAAK,CAAC;QAEX,OAAO;YACH,YAAY,cAAc;YAC1B,eAAe,iBAAiB;YAChC,aAAa,eAAe;YAC5B;YACA,kBAAkB,oBAAoB,EAAE;YACxC,cAAc,gBAAgB,EAAE;QACpC;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO;YACH,YAAY;YAAG,eAAe;YAAG,aAAa;YAAG,cAAc;YAAG,kBAAkB,EAAE;YAAE,cAAc,EAAE;QAC5G;IACJ;AACJ;;;IApCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/.next-internal/server/app/admin/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logoutAction as '00f7e50ecd6072ef6bb910f7e68b18d28bf57bad40'} from 'ACTIONS_MODULE0'\nexport {getAdminStats as '00b972b9398ca0fae91156e1d8b177f149fc819255'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0],"debugId":null}}]
}