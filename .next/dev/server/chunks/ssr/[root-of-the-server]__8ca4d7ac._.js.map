{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/components/admin/AdminSidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/AdminSidebar.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/AdminSidebar.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/components/admin/AdminSidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/AdminSidebar.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/AdminSidebar.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n// Server-side client with service role (use carefully!)\r\nexport const supabaseAdmin = createClient(\r\n    supabaseUrl,\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\r\n    {\r\n        auth: {\r\n            autoRefreshToken: false,\r\n            persistSession: false\r\n        }\r\n    }\r\n);\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa;AAG3C,MAAM,gBAAgB,IAAA,8LAAY,EACrC,aACA,QAAQ,GAAG,CAAC,yBAAyB,EACrC;IACI,MAAM;QACF,kBAAkB;QAClB,gBAAgB;IACpB;AACJ","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\r\nimport { SupabaseAdapter } from \"@auth/supabase-adapter\"\r\nimport Credentials from \"next-auth/providers/credentials\"\r\nimport Google from \"next-auth/providers/google\"\r\nimport { z } from \"zod\"\r\nimport { supabaseAdmin } from \"./lib/supabase\"\r\nimport bcrypt from \"bcryptjs\"\r\n\r\nexport const { handlers, auth, signIn, signOut } = NextAuth({\r\n    adapter: SupabaseAdapter({\r\n        url: process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        secret: process.env.SUPABASE_SERVICE_ROLE_KEY!,\r\n    }),\r\n    providers: [\r\n        Google,\r\n        Credentials({\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\" },\r\n                password: { label: \"Password\", type: \"password\" },\r\n            },\r\n            authorize: async (credentials) => {\r\n                const parsedCredentials = z\r\n                    .object({ email: z.string().email(), password: z.string().min(6) })\r\n                    .safeParse(credentials)\r\n\r\n                if (parsedCredentials.success) {\r\n                    const { email, password } = parsedCredentials.data\r\n\r\n                    // 1. Fetch user from Supabase\r\n                    const { data: user } = await supabaseAdmin\r\n                        .from('users')\r\n                        .select('*')\r\n                        .eq('email', email)\r\n                        .single()\r\n\r\n                    if (user && user.password) {\r\n                        // 2. Verify password with bcrypt\r\n                        const passwordsMatch = await bcrypt.compare(password, user.password);\r\n\r\n                        if (passwordsMatch) {\r\n                            return {\r\n                                id: user.id,\r\n                                email: user.email,\r\n                                name: user.name,\r\n                                role: user.role,\r\n                                image: user.image,\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n\r\n                    // 2. Demo Auto-Signup: Create user if not exists\r\n                    const { data: newUser, error: createError } = await supabaseAdmin\r\n                        .from('users')\r\n                        .insert({\r\n                            email,\r\n                            name: email.split(\"@\")[0],\r\n                            image: `https://i.pravatar.cc/150?u=${email}`,\r\n                            role: 'USER'\r\n                        })\r\n                        .select()\r\n                        .single()\r\n\r\n                    if (newUser) {\r\n                        return {\r\n                            id: newUser.id,\r\n                            email: newUser.email,\r\n                            name: newUser.name,\r\n                            role: newUser.role,\r\n                            image: newUser.image,\r\n                        }\r\n                    }\r\n                }\r\n                return null\r\n            },\r\n        }),\r\n    ],\r\n    callbacks: {\r\n        async session({ session, token }) {\r\n            if (token?.sub && session.user) {\r\n                session.user.id = token.sub;\r\n                session.user.role = token.role as \"USER\" | \"ADMIN\" | \"SUPER_ADMIN\";\r\n            }\r\n            return session\r\n        },\r\n        async jwt({ token, user }) {\r\n            if (user) {\r\n                token.sub = user.id;\r\n                if ((user as any).role) token.role = (user as any).role;\r\n            }\r\n\r\n            if (token.sub && !token.role) {\r\n                const { data } = await supabaseAdmin\r\n                    .from('users')\r\n                    .select('role')\r\n                    .eq('id', token.sub)\r\n                    .single();\r\n\r\n                if (data) {\r\n                    token.role = data.role;\r\n                }\r\n            }\r\n            return token\r\n        }\r\n    },\r\n    session: {\r\n        strategy: \"jwt\", // Credentials provider requires JWT strategy usually\r\n    },\r\n    pages: {\r\n        signIn: \"/login\",\r\n    }\r\n})\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,gKAAQ,EAAC;IACxD,SAAS,IAAA,yKAAe,EAAC;QACrB,GAAG;QACH,QAAQ,QAAQ,GAAG,CAAC,yBAAyB;IACjD;IACA,WAAW;QACP,gMAAM;QACN,IAAA,qMAAW,EAAC;YACR,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,WAAW,OAAO;gBACd,MAAM,oBAAoB,uKAAC,CACtB,MAAM,CAAC;oBAAE,OAAO,uKAAC,CAAC,MAAM,GAAG,KAAK;oBAAI,UAAU,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;gBAAG,GAChE,SAAS,CAAC;gBAEf,IAAI,kBAAkB,OAAO,EAAE;oBAC3B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,kBAAkB,IAAI;oBAElD,8BAA8B;oBAC9B,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,uIAAa,CACrC,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,SAAS,OACZ,MAAM;oBAEX,IAAI,QAAQ,KAAK,QAAQ,EAAE;wBACvB,iCAAiC;wBACjC,MAAM,iBAAiB,MAAM,4IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;wBAEnE,IAAI,gBAAgB;4BAChB,OAAO;gCACH,IAAI,KAAK,EAAE;gCACX,OAAO,KAAK,KAAK;gCACjB,MAAM,KAAK,IAAI;gCACf,MAAM,KAAK,IAAI;gCACf,OAAO,KAAK,KAAK;4BACrB;wBACJ;oBACJ;oBACA,OAAO;;;oBAEP,iDAAiD;oBACjD,MAAc,qBAAgB;gBAoBlC;gBACA,OAAO;YACX;QACJ;KACH;IACD,WAAW;QACP,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,OAAO,OAAO,QAAQ,IAAI,EAAE;gBAC5B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;gBAC3B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAClC;YACA,OAAO;QACX;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,GAAG,GAAG,KAAK,EAAE;gBACnB,IAAI,AAAC,KAAa,IAAI,EAAE,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;YAC3D;YAEA,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,IAAI,EAAE;gBAC1B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,uIAAa,CAC/B,IAAI,CAAC,SACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,MAAM,GAAG,EAClB,MAAM;gBAEX,IAAI,MAAM;oBACN,MAAM,IAAI,GAAG,KAAK,IAAI;gBAC1B;YACJ;YACA,OAAO;QACX;IACJ;IACA,SAAS;QACL,UAAU;IACd;IACA,OAAO;QACH,QAAQ;IACZ;AACJ","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/lib/auth-utils.ts"],"sourcesContent":["import { auth } from \"@/auth\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport async function requireAdmin() {\r\n    const session = await auth();\r\n    if (!session || (session.user?.role !== \"ADMIN\" && session.user?.role !== \"SUPER_ADMIN\")) {\r\n        redirect(\"/\");\r\n    }\r\n    return session;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,eAAe;IAClB,MAAM,UAAU,MAAM,IAAA,mHAAI;IAC1B,IAAI,CAAC,WAAY,QAAQ,IAAI,EAAE,SAAS,WAAW,QAAQ,IAAI,EAAE,SAAS,eAAgB;QACtF,IAAA,iMAAQ,EAAC;IACb;IACA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kadeeja/Desktop/New%20folder/src/app/admin/layout.tsx"],"sourcesContent":["import React from 'react';\r\nimport AdminSidebar from '@/components/admin/AdminSidebar';\r\nimport { requireAdmin } from '@/lib/auth-utils';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nexport default async function AdminLayout({ children }: { children: React.ReactNode }) {\r\n    await requireAdmin();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex\">\r\n            <AdminSidebar />\r\n            <main className=\"flex-1 ml-64 p-8 md:p-12\">\r\n                <div className=\"max-w-7xl mx-auto space-y-8\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;AAEO,MAAM,UAAU;AAER,eAAe,YAAY,EAAE,QAAQ,EAAiC;IACjF,MAAM,IAAA,2IAAY;IAElB,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,sJAAY;;;;;0BACb,8OAAC;gBAAK,WAAU;0BACZ,cAAA,8OAAC;oBAAI,WAAU;8BACV;;;;;;;;;;;;;;;;;AAKrB","debugId":null}}]
}